(()=>{"use strict";!function(e){function t(){setTimeout(function(){e(".select2-results__option").each(function(){const t=e(this),n=t.text();if(-1!==n.indexOf("#")&&!t.find(".color-preview").length){const c=n.match(/\(#([a-fA-F0-9]{6})\)/);if(c){const n="#"+c[1],o=e('<span class="color-preview" style="display: inline-block; width: 16px; height: 16px; border-radius: 50%; background-color: '+n+'; margin-right: 8px; border: 1px solid #ddd; vertical-align: middle;"></span>');t.prepend(o)}}}),e(".select2-selection__choice").each(function(){const t=e(this),n=t.text();if(-1!==n.indexOf("#")&&!t.find(".color-preview").length){const c=n.match(/\(#([a-fA-F0-9]{6})\)/);if(c){const n="#"+c[1],o=e('<span class="color-preview" style="display: inline-block; width: 12px; height: 12px; border-radius: 50%; background-color: '+n+'; margin-right: 4px; border: 1px solid #ddd; vertical-align: middle;"></span>');t.prepend(o)}}})},200)}e(document).ready(function(){t()}),e(document).on("acf/setup_fields",function(){t()}),e(document).on("select2:open",function(){t()}),e(document).on("select2:close",function(){setTimeout(function(){t()},100)});const n=new MutationObserver(function(n){n.forEach(function(n){"childList"===n.type&&n.addedNodes.length>0&&e(n.addedNodes).each(function(){(e(this).hasClass("select2-results__options")||e(this).hasClass("select2-selection__choice"))&&t()})})});function c(t,n){const c=t.closest(".acf-field-object").find('[data-name="exclude_colors"]'),i=t.closest(".acf-field-object").find('[data-name="include_colors"]');(c.length||i.length)&&e.ajax({url:acfPaletteAdmin.ajaxUrl,type:"POST",data:{action:"acf_palette_get_colors",nonce:acfPaletteAdmin.nonce,source:n},success(e){e.success&&e.data.colors&&(c.length&&o(c,e.data.colors),i.length&&o(i,e.data.colors))}})}function o(e,n){const c=e.find("select");c.length&&(c.val(null),c.empty(),n.forEach(function(e){const t=new Option(e.text,e.id,!1,!1);c.append(t)}),c.trigger("change"),t())}e(document).ready(function(){n.observe(document.body,{childList:!0,subtree:!0})}),e(document).on("change",'[data-name="color_source"] input[type="radio"]',function(){c(e(this).closest('[data-name="color_source"]'),e(this).val())}),"undefined"!=typeof acf&&acf.addAction("change_field_type=color_source",function(e){const t=e.find("input:checked").val();c(e,t)})}(jQuery)})();